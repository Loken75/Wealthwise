---
title: "WealthWise â€” Architecture en couches (Hexagonale / Clean Architecture)"
---
flowchart TB
    subgraph PRESENTATION["ðŸŒ Couche PrÃ©sentation (presentation/)"]
        direction LR
        AC[AccountController]
        TC[TransactionController]
        BC[BudgetController]
        CC[CategoryController]
        ANC[AnalyticsController]
        IC[ImportController]
    end

    subgraph APPLICATION["âš™ï¸ Couche Application (application/)"]
        direction TB

        subgraph COMMANDS["Commands (Write â€” CQRS)"]
            direction LR
            C1[CreateAccount]
            C2[CreateTransaction]
            C3[CreateBudget]
            C4[CategorizeTransaction]
        end

        subgraph QUERIES["Queries (Read â€” CQRS)"]
            direction LR
            Q1[GetAccount]
            Q2[SearchTransactions]
            Q3[GetMonthlyReport]
            Q4[GetCategoryBreakdown]
        end

        subgraph USECASES["Use Cases"]
            direction LR
            U1[ImportBankStatement]
            U2[AutoCategorization]
            U3[GenerateReport]
        end
    end

    subgraph DOMAIN["ðŸ’Ž Couche Domaine (domain/) â€” AUCUNE DÃ‰PENDANCE TECHNIQUE"]
        direction TB

        subgraph SHARED["Shared Kernel"]
            Money_d["âœ… Money"]
            Currency_d["âœ… Currency"]
            DateRange_d["â¬œ DateRange"]
            UserId_d["â¬œ UserId"]
        end

        subgraph ACCOUNT_CTX["Account Context"]
            Account_d["â¬œ Account â˜…"]
            AccountId_d["âœ… AccountId"]
            Balance_d["âœ… Balance"]
            AccountType_d["âœ… AccountType"]
            AccountRepo_d["â¬œ AccountRepository\n(interface/port)"]
        end

        subgraph TX_CTX["Transaction Context"]
            Transaction_d["â¬œ Transaction â˜…"]
            TransactionId_d["â¬œ TransactionId"]
            TransactionType_d["â¬œ TransactionType"]
            TxRepo_d["â¬œ TransactionRepository\n(interface/port)"]
        end

        subgraph BUDGET_CTX["Budget Context"]
            Budget_d["â¬œ Budget â˜…"]
            BudgetId_d["â¬œ BudgetId"]
            BudgetPeriod_d["â¬œ BudgetPeriod"]
            BudgetRepo_d["â¬œ BudgetRepository\n(interface/port)"]
        end

        subgraph CAT_CTX["Category Context"]
            Category_d["â¬œ Category â˜…"]
            CategoryId_d["â¬œ CategoryId"]
            CatRepo_d["â¬œ CategoryRepository\n(interface/port)"]
        end
    end

    subgraph INFRASTRUCTURE["ðŸ”§ Couche Infrastructure (infrastructure/)"]
        direction TB

        subgraph PERSISTENCE["Persistence (JPA / PostgreSQL)"]
            JPA1[JpaAccountRepository]
            JPA2[JpaTransactionRepository]
            JPA3[JpaBudgetRepository]
        end

        subgraph MESSAGING["Messaging (RabbitMQ)"]
            MQ1[EventPublisher]
            MQ2[BudgetEventListener]
        end

        subgraph CACHING["Cache (Redis)"]
            REDIS1[RedisCacheAdapter]
        end

        subgraph EXTERNAL["APIs Externes"]
            EXT1[ExchangeRateClient]
            EXT2[CategorizationApiClient]
        end

        subgraph PARSING["Parsers"]
            P1[CsvBankStatementParser]
            P2[PdfBankStatementParser]
        end

        subgraph SECURITY["SÃ©curitÃ©"]
            SEC1[SecurityConfig]
            SEC2[JwtTokenProvider]
        end
    end

    subgraph DATA["ðŸ—„ï¸ Services Externes"]
        direction LR
        PG[(PostgreSQL)]
        RD[(Redis)]
        RMQ[(RabbitMQ)]
        EXTAPI[/APIs tierces/]
    end

    %% Flux
    PRESENTATION -->|"DTOs Request"| APPLICATION
    APPLICATION -->|"appelle"| DOMAIN
    APPLICATION -->|"utilise"| INFRASTRUCTURE
    INFRASTRUCTURE -->|"implÃ©mente les ports de"| DOMAIN
    INFRASTRUCTURE --> DATA

    %% LÃ©gende
    subgraph LEGEND["LÃ©gende"]
        direction LR
        L1["âœ… = ImplÃ©mentÃ©"]
        L2["â¬œ = Ã€ faire"]
        L3["â˜… = Aggregate Root"]
    end

    style DOMAIN fill:#1a472a,stroke:#2d8f4e,color:#fff
    style APPLICATION fill:#2c3e50,stroke:#3498db,color:#fff
    style PRESENTATION fill:#4a235a,stroke:#8e44ad,color:#fff
    style INFRASTRUCTURE fill:#7d3c00,stroke:#e67e22,color:#fff
    style DATA fill:#1c2833,stroke:#566573,color:#fff
    style LEGEND fill:#fff,stroke:#ccc,color:#000
